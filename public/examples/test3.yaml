scene:
  id: failed-bank-hack
  name: "Failed Bank Attack Simulation"
  width: 1280
  height: 720
  fps: 60
  background: "#0b0d0e"
  duration: 12

  timeline:
    - {id: intro, at: 0}
    - {id: typing, after: intro, delay: 0.4}
    - {id: breachStart, after: typing, delay: 2}
    - {id: breachFail, after: breachStart, delay: 2}
    - {id: alertIn, after: breachFail, delay: 0.4}

  camera:
    initial: {x: 0, y: 0, z: 0, scale: 1, rotation: 0}
    animations:
      - on: breachStart
        steps:
          - type: anime
            duration: 0.6
            props:
              ease: inOutQuad
              y: {from: 0, to: -14}
              scale: {from: 1, to: 1.02}
      - on: breachFail
        steps:
          # Subtle shake on failure
          - type: anime
            duration: 0.5
            props:
              ease: inOutSine
              x:
                - {from: 0, to: -8, duration: 120}
                - {to: 8, duration: 120}
                - {to: -5, duration: 90}
                - {to: 0, duration: 90}

  elements:
    - type: group
      full: true
      flexCol: true
      gap: 16
      padding: [24,24]
      children:
        # Header bar
        - type: group
          row: true
          gap: 12
          padding: [10,16]
          bg: "#11161a"
          justify: center
          children:
            - {type: circle, square: 10, bg: "#ef4444"}
            - {type: circle, square: 10, bg: "#f59e0b"}
            - {type: circle, square: 10, bg: "#22c55e"}
            - {type: text, txt: "SecureBank Terminal v3.0", fs: 14, color: "#94a3b8"}

        # Main grid
        - type: group
          row: true
          gap: 16
          children:
            # Left terminal panel
            - type: group
              w: 780
              h: 560
              bg: "#0f172a"
              padding: [16]
              flexCol: true
              gap: 12
              children:
                - type: group
                  row: true
                  gap: 8
                  padding: [8,12]
                  bg: "#111b2e"
                  children:
                    - {type: text, txt: "root@attack-node:~$", fs: 13, color: "#22c55e", ff: "monospace"}
                    - {type: text, txt: " ./bank_exploit.sh --target 10.12.0.8", fs: 13, color: "#cbd5e1", ff: "monospace"}

                # Live log feed
                - type: group
                  flexCol: true
                  gap: 6
                  animations:
                    - on: typing
                      steps:
                        - type: anime
                          duration: 0.9
                          props:
                            targets: children
                            y: {from: 8, to: 0}
                            opacity: {from: 0, to: 1}
                            stagger: {each: 120}
                  children:
                    - {type: text, txt: "[+] Initializing network scanner...", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[+] Probing open services (22, 443, 5432)...", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[+] Detecting WAF signatures...", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[!] Rate limit detected. Adjusting timing...", fs: 13, color: "#f59e0b", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[+] Injecting payload (phase 1/3)...", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}

                # Progress bar group
                - type: group
                  flexCol: true
                  gap: 8
                  children:
                    - {type: text, txt: "EXPLOIT PROGRESS", fs: 12, color: "#60a5fa", ff: "monospace"}
                    - type: group
                      w: 700
                      h: 16
                      bg: "#0b1220"
                      children:
                        - type: rect
                          id: prog
                          h: 16
                          bg: "#22d3ee"
                          animations:
                            - on: breachStart
                              steps:
                                - type: anime
                                  duration: 1.2
                                  props:
                                    ease: outCubic
                                    width:
                                      - {from: 0, to: 650, duration: 1200}
                            - on: breachFail
                              steps:
                                - type: anime
                                  duration: 0.5
                                  props:
                                    ease: inCubic
                                    width: {to: 280, duration: 500}
                                    'shadow.blur': {from: 0, to: 12, duration: 300}

                # Failure lines
                - type: group
                  flexCol: true
                  gap: 6
                  animations:
                    - on: breachFail
                      steps:
                        - type: anime
                          duration: 0.8
                          props:
                            targets: children
                            y: {from: 8, to: 0}
                            opacity: {from: 0, to: 1}
                            color: {from: "#cbd5e1", to: "#f87171"}
                            stagger: {each: 100}
                  children:
                    - {type: text, txt: "[x] Access denied: MFA challenge required", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[x] IDS alert triggered: anomaly pattern", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}
                    - {type: text, txt: "[x] Session revoked by server policy", fs: 13, color: "#cbd5e1", ff: "monospace", opacity: 0}

            # Right summary panel
            - type: group
              w: 420
              h: 560
              bg: "#0d1117"
              padding: [16]
              flexCol: true
              gap: 14
              children:
                - {type: text, txt: "INTRUSION SUMMARY", fs: 14, fw: bold, color: "#e5e7eb"}
                - type: group
                  flexCol: true
                  gap: 10
                  animations:
                    - on: typing
                      steps:
                        - type: anime
                          duration: 0.8
                          props:
                            targets: children
                            opacity: {from: 0, to: 1}
                            y: {from: 8, to: 0}
                            stagger: {each: 100}
                  children:
                    - {type: text, txt: "Firewall: ACTIVE", fs: 13, color: "#93c5fd"}
                    - {type: text, txt: "WAF: THROTTLING", fs: 13, color: "#fde68a"}
                    - {type: text, txt: "IDS: ALERTED", fs: 13, color: "#fca5a5"}
                    - {type: text, txt: "MFA: ENFORCED", fs: 13, color: "#86efac"}

                - type: group
                  flexCol: true
                  gap: 8
                  children:
                    - {type: text, txt: "RISK LEVEL", fs: 12, color: "#9ca3af"}
                    - type: rect
                      h: 12
                      bg: "#1f2937"
                      children:
                        - type: rect
                          h: 12
                          bg: "#ef4444"
                          animations:
                            - on: breachFail
                              steps:
                                - type: anime
                                  duration: 0.8
                                  props:
                                    ease: outBack
                                    width: {from: 120, to: 360, duration: 800}

        # Alert overlay (centered) on failure
        - type: rect
          abs: true
          center: true
          w: 520
          h: 200
          bg: "#18181b"
          border: {color: "#ef4444", width: 2}
          opacity: 0
          animations:
            - on: alertIn
              steps:
                - type: anime
                  duration: 0.6
                  props:
                    ease: outBack
                    opacity: {from: 0, to: 1}
                    scale: {from: 0.92, to: 1}
          children:
            - type: group
              flexCol: true
              gap: 12
              padding: [24]
              centerItems: true
              children:
                - {type: text, txt: "ATTEMPT BLOCKED", fs: 22, fw: bold, color: "#ef4444"}
                - {type: text, txt: "Security systems prevented unauthorized access.", fs: 14, color: "#d1d5db"}
                - type: group
                  row: true
                  gap: 16
                  children:
                    - type: group
                      w: 140
                      h: 44
                      bg: "#dc2626"
                      radius: 8
                      centerItems: true
                      justify: center
                      shadow: {x: 0, y: 4, blur: 12, color: "rgba(220,38,38,0.3)"}
                      animations:
                        - on: alertIn
                          steps:
                            - type: anime
                              duration: 0.3
                              props:
                                scale: {from: 0.9, to: 1}
                                'shadow.blur': {from: 0, to: 12}
                      children:
                        - {type: text, txt: "Dismiss", fs: 14, fw: "600", color: "#fff"}
                    - type: group
                      w: 180
                      h: 44
                      bg: "#334155"
                      radius: 8
                      centerItems: true
                      justify: center
                      shadow: {x: 0, y: 4, blur: 12, color: "rgba(51,65,85,0.3)"}
                      animations:
                        - on: alertIn
                          steps:
                            - type: anime
                              duration: 0.3
                              props:
                                scale: {from: 0.9, to: 1}
                                'shadow.blur': {from: 0, to: 12}
                      children:
                        - {type: text, txt: "View Logs", fs: 14, fw: "600", color: "#e5e7eb"}

